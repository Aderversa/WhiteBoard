# 白板项目需求分析

# 核心功能

实现白板功能，该功能的核心需求为：

1. 白板本身，白板既可以是一个PDF书籍、一张白纸、一个田字本、一个横线本等（这些东西都可以抽象为白板的背景）（需要随时应对这个白板的背景需求变化的能力），白板是可以有多页的，可以把白板类比成可以随意添加纸张的活页本。
2. 不同的笔，需要有不同的笔，比如：钢笔、荧光笔、橡皮擦、激光笔。

    1. 有些图形虽然可以利用笔一步步画出来，比如：椭圆、正方形、长方形、圆、三角形等，但是画出来不好看，于是我们需要提供标准的画出这些图形的功能。
    2. 白板上的各种图案（不管是怎样画的）都有移动的需求，因此需要给用户提供选中图案，然后移动图案的功能。
3. 需要在白板界面中，为用户提供好工具列表（这里的工具指笔等一系列能使用在白板上的功能），这是为了让用户不需要频繁切换页面，导致使用体验下降。可以把这个工具集中到一个工具栏中，做成悬浮窗口让用户可以按习惯自行定义工具栏的摆放位置。
4. 用户可以对白板进行缩放操作，用来看清楚上面的文字，满足不同屏幕大小的用户。缩放的大小是可以锁定的，以防止用户经常误操作调整缩放。
5. 白板需要撤销和恢复的功能，目前市面上绝大部分文本编辑类软件都需要提供这种功能。

以上是白板界面的核心需求。除了上面这些需求之外，我们还需要对白板进行管理。

一个白板相当于一本活页草稿纸，为这个草稿纸打印上书籍数据就成了书本草稿，用户可以在书本上做笔记。

我们还需要提供对这些用户写过的“白板”进行管理，做成类似于书架的效果，用户可以**对曾经写过的白板进行分类，收藏等操作。**

**用户可以导入PDF形成一本书籍类白板，也可以从零开始创建一本草稿纸类白板。**

**用户可以将白板草稿本导出成一个PDF文件，或者导出专门适应本软件的文件格式用来在使用本软件的用户手中流通的过程中保证信息无损。**

# 具体需求

## 白板

我们的白板草稿纸，需要提供一些常用的背景，比如：格纹草稿纸、横格草稿纸、空白草稿纸、田字格等等背景的草稿纸。

为了方便扩展，我们需要有一套可靠性、可维护性、可扩展性兼顾的架构来支持。

注意，这些草稿纸背景对导入的PDF草稿纸页面无效，打印好了就不能在更改了。但，像是格纹草稿纸换田字格这种软件提供好的背景是可以随意更换的。

白板的背景颜色用户可以自定义，同时，软件本身需要提供一些常用的背景颜色供用户选择。

现实生活中，我们有时会使用纵向的A4纸，也可能横向使用A4纸，在本软件中会提供这样的功能，用户可以选择横向还是纵向使用草稿纸。不论是横向还是纵向使用草稿纸，它都不是针对于整本草稿纸而言的，毕竟我们是软件，软件只是把这些纸以某种不符合常理的但又合理的东西整合了起来。

> 但是，PDF导入的草稿纸默认是纵向的，如果要更改成横向的所造成的结果由用户承担。这倒是不需要害怕，因为还有撤销操作进行保底。

## 工具

<span data-type="text" style="color: var(--b3-font-color13); font-size: 40px;">笔画应该是一种有宽度的面积区域！</span>后续的设计因为这个点没有分析清楚导致了许多设计的错误。如果是大项目这将导致大量的返工。

### 钢笔

在一定条件下（比如PC上按压鼠标后移动，平板上触摸移动），钢笔在白板草稿纸上移动就会产生笔迹。

笔迹的颜色由钢笔的特性来决定，钢笔装什么墨水，你就得画出什么颜色的笔迹，而这个笔迹的颜色用户可以通过调色板自定义，同时软件会提供一些常用的颜色给用户。

现实中，我们通过按压力度等方法控制笔迹的宽度，但在本软件中，钢笔所画笔迹的宽度是固定的，这个固定的宽度可以由用户自定义。

### 荧光笔

荧光笔它是钢笔的一个变种，它的笔迹不会直接覆盖掉原本的笔迹，而是在白板上画出了一到“透明的轨迹”。

这个轨迹可以有不同的颜色，且用户可以自定义该轨迹的宽度和颜色。

有的时候，我们在PDF书籍上做笔记的时候，通常会利用荧光笔高亮标记一些背景文本，这个时候荧光笔通常都是水平的轨迹。因此，平常的荧光笔虽然可以像钢笔一样随意画画，但是用户可以开启荧光笔的直线绘制功能，使其画出的笔迹是一条直线。

### 橡皮擦

橡皮擦可以擦掉其他工具在白板上留下的痕迹，包括：钢笔的、荧光笔的、以图形方式存在的图形等等。

用户可以在白板上移动橡皮擦来擦掉自己想擦除的笔迹，软件也会在显眼的地方提供一键清除所有笔迹而无需移动橡皮擦的功能。

同时，橡皮擦的大小也是可调节的，这样让用户根据自己当前的擦除需求，设置不同大小的橡皮擦完成擦除的目的。

### 激光笔

激光笔是一种特殊的笔，它的内部呈白色但周围会附带其他颜色的阴影。附带的阴影的颜色用户可以自定义，同时激光笔的宽度不可调节。

激光笔也可以单单只以点的方式呈现，这个点跟随着笔尖的移动而移动。

激光笔的笔迹不会留在白板上，它会在一段时间过后自行消散。如果在消散的时间中切换了笔，那么激光笔笔迹自动全部消散。

激光笔只是一种呈现效果而非写在白板上的东西。

### 标准图形项功能

用户可以在工具栏中选择绘制三角形、矩形、正方形、圆、椭圆等图形项，在第一次绘制出来的时候不同的图形项可以进行微调。

当用户的输入焦点离开了图形项之后，图形项不再能够进行调整，只能进行移动。

也就是说，完成微调之后的图形项被当做钢笔所画笔迹来处理，这个功能只是用来辅助用户画出标准图形的工具。

图形项的轨迹是能够被橡皮擦擦除的。

### 选择笔迹

被选择的笔迹可以进行缩放调整大小、旋转，还可以在白板上移动。

## 撤销/恢复

对于用户在打开白板后进行的操作，用户都可以进行撤销。

对于用户撤销的操作，用户也可以进行恢复，但如果用户在撤销之后进行了修改，就无法进行恢复。只要用户没有在撤销之后进行新的修改，用户就可以撤销撤销操作，我称之为恢复。

如果用户保存了操作，那么软件就会认为用户已经满意刚才的操作了，于是进行保存，不再允许撤销。用户退出了软件再次进入软件希望撤销操作是不被允许的，因为退出会自动保存。

## 白板缩放

除了笔迹可以单独在白板上缩放外，白板本身也可以在屏幕上进行放大/缩小，这种操作其实更像聚焦于白板的某个区域上。

软件会将缩放比例展示在白板中较为明显的位置上，同时旁边会有明显的按键来提示用户是否锁定该缩放比例。

## 书架功能

用户想要在白板上写东西，首先必须先创建一个白板出来，然后在白板上添加页面来写东西。

用户可以像组织文件一样在屏幕上组织书籍，用户可以自定义草稿纸的封面。

也可以创建一个文件夹，为这个文件夹命名，然后将符合条件的白板扔进去。

用户可以重命名任何文件夹或者白板草稿纸或者PDF导入过来的草稿纸。

用户也可以删除任何在书架上的任何白板草稿纸或者文件夹。

用户也可以收藏自己钟爱的白板草稿纸，然后在收藏列表中找到它，这是为了在白板众多的情况下用户能够精炼自己最常用的那几个白板草稿纸。

## 导入PDF作为白板草稿纸

本软件无法天生支持打开PDF文件，用户需要在书架中将PDF文件导入成白板草稿纸，然后该白板草稿纸的背景就变成PDF的内容。

导入之后，该白板草稿纸和其他的没有什么区别，就是PDF导入的白板草稿纸的背景不可更换，但如果你在该白板中插入一个软件自己的背景版草稿纸，那该页的背景是可以随意更换的。

## 导出功能

白板草稿纸可以导出成PDF文件，也可以导出成本软件自定义好的文件格式。

前者导出之后如果再进行导入，其已经在PDF上面的笔迹无法再通过本软件进行操作。

后者能最大限度地保证草稿纸的完整性，重新导入之后，笔迹还是能够被软件识别出来。
